TYPE=TRIGGERS
triggers='CREATE DEFINER=`redha`@`%` TRIGGER `lab_AFTER_INSERT` AFTER INSERT ON `lab` FOR EACH ROW BEGIN\n	DECLARE original_query VARCHAR(500);\n # INSERT INTO `unimedica_db`.`system_users` (`lab_id`,`name`,`username`,`password`,`user_type`,`hash`)VALUES(new.id ,new.name,concat(\'user\',new.id),concat(\'user\',new.id),3,FLOOR( 1 + RAND( ) *UNIX_TIMESTAMP(NOW()) ));\nINSERT ignore INTO `system_users` (`lab_id`,`name`,`username`,`password`,`user_type`,`hash`,`insert_record_date`,`is_deleted`)      \n                VALUES \n				(new.id,\n                new.name,\n                concat(\'user\',new.id),\n                LEFT(md5(concat(3,new.id)), 8),\n                3,\n                md5(concat(new.id,3)),\n                now(),\n                \'0\'\n				);\n                \n                \n                \n 	-- sync\n    SET original_query = (SELECT info FROM INFORMATION_SCHEMA.PROCESSLIST WHERE id = CONNECTION_ID());\n    INSERT INTO `offline_sync`(`table_name`,`operation`,`lab_id`,`query`) VALUES (\'lab\',\'insert\',\'0\',original_query);\n  --\n\nEND' 'CREATE DEFINER=`redha`@`%` TRIGGER `lab_BEFORE_UPDATE` BEFORE UPDATE ON `lab` FOR EACH ROW BEGIN\n\n\n    \nINSERT INTO `log_lab`\n(\n`lab_id`,\n`region_id`,\n`name`,\n`phone`,\n`owner`,\n`user_id`,\n`is_active`,\n`is_deleted`,\n`date`,\n`updated_at`)\nVALUES\n(\nold.id,\nold.region_id,\nold.name,\nold.phone,\nold.owner,\nold.user_id,\nold.is_active,\nold.is_deleted,\nold.date,\nold.updated_at\n);\n\n\n\n\nEND' 'CREATE DEFINER=`redha`@`%` TRIGGER `lab_AFTER_UPDATE` AFTER UPDATE ON `lab` FOR EACH ROW BEGIN\n	DECLARE original_query VARCHAR(500);\n     SET original_query = (SELECT info FROM INFORMATION_SCHEMA.PROCESSLIST WHERE id = CONNECTION_ID());\n    INSERT INTO `offline_sync`(`table_name`,`operation`,`lab_id`,`query`) VALUES (\'lab\',\'update\',\'0\',original_query);\nEND' 'CREATE DEFINER=`redha`@`%` TRIGGER `lab_BEFORE_DELETE` BEFORE DELETE ON `lab` FOR EACH ROW BEGIN\n\n\nINSERT INTO `log_lab`\n(\n`lab_id`,\n`region_id`,\n`name`,\n`phone`,\n`owner`,\n`user_id`,\n`is_active`,\n`is_deleted`,\n`date`,\n`updated_at`)\nVALUES\n(\nold.id,\nold.region_id,\nold.name,\nold.phone,\nold.owner,\nold.user_id,\nold.is_active,\nold.is_deleted,\nold.date,\nold.updated_at\n);\n\n\n\n\nEND' 'CREATE DEFINER=`redha`@`%` TRIGGER `lab_AFTER_DELETE` AFTER DELETE ON `lab` FOR EACH ROW BEGIN\nDECLARE original_query VARCHAR(500);\n SET original_query = (SELECT info FROM INFORMATION_SCHEMA.PROCESSLIST WHERE id = CONNECTION_ID());\n    INSERT INTO `offline_sync`(`table_name`,`operation`,`lab_id`,`query`) VALUES (\'lab\',\'del\',\'0\',original_query);\nEND'
sql_modes=1166016520 1166016520 1166016520 1166016520 1166016520
definers='redha@%' 'redha@%' 'redha@%' 'redha@%' 'redha@%'
client_cs_names='utf8mb4' 'utf8mb4' 'utf8mb4' 'utf8mb4' 'utf8mb4'
connection_cl_names='utf8mb4_general_ci' 'utf8mb4_general_ci' 'utf8mb4_general_ci' 'utf8mb4_general_ci' 'utf8mb4_general_ci'
db_cl_names='utf8mb4_general_ci' 'utf8mb4_general_ci' 'utf8mb4_general_ci' 'utf8mb4_general_ci' 'utf8mb4_general_ci'
